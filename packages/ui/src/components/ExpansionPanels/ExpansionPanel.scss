.expansion-panel {
  display: grid;
  grid-template-rows: min-content 1fr min-content;
  overflow: hidden;
  position: relative;
  min-height: 0;
  height: 100%;
  width: 100%;

  &[data-expanded='false'] {
    grid-template-rows: min-content 0 0;
    height: auto;
  }

  // Body panel with top handle: resize-handle, summary, content
  &[data-top-handle='true'] {
    grid-template-rows: min-content min-content 1fr;
  }

  &[data-top-handle='true'][data-expanded='false'] {
    grid-template-rows: min-content 0;
  }

  &__summary {
    cursor: pointer;
    font-size: var(--datamapper-panel-header-font-size, var(--pf-t--global--font--size--heading--h5));
    font-weight: var(
      --pf-t--global--font--weight--200
    ); // Medium weight (500) - stronger than normal (400) but not bold (700)

    font-family: var(--pf-t--global--font--family--heading);
    font-style: normal;
    padding: var(--datamapper-panel-header-padding, var(--pf-t--global--spacer--sm));
    min-height: var(--datamapper-panel-header-height, auto);
    border: 1px solid var(--pf-t--color--gray--10);
    box-shadow: var(--pf-t--global--box-shadow--sm--bottom);
    user-select: none;
    flex-shrink: 0;
  }

  &__content {
    overflow: auto;
    min-height: 0;
    transition: opacity var(--expansion-panel-animation);
  }

  &[data-expanded='false'] &__content {
    opacity: 0;
  }

  // Edge markers for virtual scroll - positioned relative to expansion panel
  // These markers are placed in the document header actions but positioned absolutely
  // relative to the .expansion-panel container (which has position: relative)
  /* stylelint-disable-next-line selector-class-pattern */
  .expansion-panel__edge-marker {
    position: absolute;
    width: 1px;
    height: 1px;
    pointer-events: none;
    z-index: 10; // Ensure markers are accessible to DOM queries
    visibility: visible; // Always visible for getBoundingClientRect()

    &--top {
      // Position at the bottom edge of the summary header (top of content area)
      top: var(--datamapper-panel-header-height, 2rem);
    }

    &--bottom {
      // Position at the center of the resize handle (4px tall, centered at 2px from bottom)
      // This aligns with the visual resize handle for consistent UX
      bottom: 2px;
    }

    // Source and parameter panels: connection ports on the right side
    &--source {
      right: 0;
    }

    // Target panels: connection ports on the left side
    &--target {
      left: 0;
    }
  }

  &__resize-handle {
    height: 4px;
    cursor: ns-resize;
    background: transparent;
    position: relative;
    flex-shrink: 0;

    &:hover {
      background: var(--pf-t--global--background--color--secondary--hover);
    }

    &:active {
      background: var(--pf-t--color--blue--30);
    }

    // Visual indicator for resize handle
    &::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100px;
      height: 2px;
      background: var(--pf-t--color--gray--30);
      border-radius: 1px;
    }
  }
}
